<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <title>Awesome Books</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
    <nav class ="navigation">
        <ul >
            <li class="awesome-link"><a>Awesome Books</a></li>
            <li class="links" id="list-link"><a>List</a></li>
            <li class="links" id="add-link"><a>Add new</a></li>
            <li class="links" id="contact-link"><a>Contact</a></li>
        </ul>
     </nav>
    <div id="date-time">Time</div>
    </header>
    <main>
        <section class="box" id="list">
            <h1>All awesome Books</h1>
            <div class = "container">            
            </div>       
        </section>
        <section class="box" id="form">
            <h1>Add a new book</h1>
            <input class='book' type="text" name="books" placeholder="Book name"><br/>
            <input class='author' type="text" name="authors" placeholder="Author"><br/>
            <button class="add">Add</button>    
        </section>
        <section class="box" id="contact">
            <h1>Contact information</h1>
            <p>Do you have any questions or you just want to say "Hello"?<br>
            You can reach out to us!
            <ul>
                <li>Our e-mail mail@mail.com</li>
                <li>Or number :00435865442</li>
                <li>Our addres: Streename 22, 84503 City, Country</li>
            </ul>
        </p>
        </section>
    </main>
    <footer>       
        Copyrights ...        
    </footer> 
    <script type="module" >
        import {BookShelf} from "./lib/script.js";      
        var shelf = new BookShelf();
        var books = [];    
        var bookName = document.querySelector('.book');
        var authorName = document.querySelector('.author');
        var add = document.querySelector('.add'); 

        var button = document.querySelectorAll('.button');     
        window.onload = () => {          
            shelf.display();
        };   
        add.addEventListener('click', () => {    
            if(bookName.value==="" ||  authorName.value===""){
                alert("Name/Author missing!");
                return;
            }
            shelf.addBook({ title: bookName.value, writer: authorName.value });
            bookName.value="";
            authorName.value ="";
        });

        document.addEventListener("click", function(e){
                const target = e.target.closest(".button"); // Or any other selector.

                if(target){               
                    shelf.removeBook(target.id);
                }
        });   
        var date = new Date();
        var month = date.toLocaleString('default', { month: 'long' });
        const formatMap = {
            mm: date.toLocaleString('default', { month: 'long' }) ,
            dd: date.getDay(),
            yy: date.getFullYear()
           
        };
        var div = document.getElementById('date-time');

        function get_ordinal_suffix(i) {
            var j = i % 10,
                k = i % 100;
            if (j == 1 && k != 11) {
                return i + "st";
            }
            if (j == 2 && k != 12) {
                return i + "nd";
            }
            if (j == 3 && k != 13) {
                return i + "rd";
            }
            return i + "th";
        }
        
        function time(date) {
            var date = new Date();

            var d = new Date();
            var s = date.getSeconds();
            var m = date.getMinutes();
            var h = date.getHours();
            div.textContent =   date.toLocaleString('default', { month: 'long' }) +" " + get_ordinal_suffix(date.getDay())+" " + date.getFullYear()  +" "+("0" + h).substr(-2) + ":" + ("0" + m).substr(-2) + ":" + ("0" + s).substr(-2) +" "+ (h >= 12 ? 'pm' : 'am');
        }

        setInterval(time, 1000);

        const links = document.querySelectorAll('.links'); /// create array of element objects

        list.classList.toggle("show");
        form.classList.toggle("show"); 
        contact.classList.toggle("show");
        list.style.display = "block";  
        links.forEach(link => { // lopp through them
            link.addEventListener('click', function handleClick(event) {
             

                var list = document.getElementById('list'); 
                var form = document.getElementById('form');
                var contact = document.getElementById('contact'); 

                 if(this.id==="list-link"){                        
                    list.style.display = "block";                       
                    form.style.display = "none";   
                    contact.style.display = "none";   
                 }
                
                 if(this.id==="add-link"){          
                    list.style.display = "none";                       
                    form.style.display = "block";   
                    contact.style.display = "none";   
                 }

                 if(this.id==="contact-link"){   
                    list.style.display = "none";                       
                    form.style.display = "none";   
                    contact.style.display = "block";   
                 } 
              
            }); 
        });    

    </script>
</body>
</html>